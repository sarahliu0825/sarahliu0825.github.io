<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>(runoob.com)</title>

</head>
<body>
<p id="demo">0001</p>

<script>
/**function access(){
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
	  
		if (this.readyState == 4){ //&& this.status == 200) {
		 alert(xhttp.responseText);
		   // Action to be performed when the document is read;
		   //document.getElementById("demo").innerHTML = xhttp.responseText;
		}
	};
	
	 xhttp.open("get", "http://demo.testfire.net", true);
	
	 //Access-Control-Allow-Origin
	xhttp.withCredentials = true;
	//xhttp.setRequestHeader()
	xhttp.send();
}
**/

function createCORSRequest(method, url){
    var xhr = new XMLHttpRequest();
    if ("withCredentials" in xhr){	
        // XHR has 'withCredentials' property only if it supports CORS
		
        xhr.open(method, url, true);
		xhr.withCredentials = true;
		xhr.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
		//xhr.setRequestHeader("User-Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0");
		
		xhr.setRequestHeader("Cache-Control","max-age=0");
    } else if (typeof XDomainRequest != "undefined"){ // if IE use XDR
	alert("222");
        xhr = new XDomainRequest();
        xhr.open(method, url);
    } else {
	alert("33333");
        xhr = null;
    }
    return xhr;
}

var xhr = createCORSRequest("get", "http://demo.testfire.net")
xhr.onreadystatechange = function() {
    //console.log( xhr.status, xhr.statusText )
	
	if(this.readyState === 4){
	 //let str = "test: " + this.statusText + " end"
	 //alert(str);
	}
}
xhr.send(); 


/**$.ajax({
   url: "http://demo.testfire.net",
   type: 'GET',
   dataType: 'JSONP',//here
   success: function (data) {
       console.log(data);
   },
});**/

</script>

</body>
</html>
